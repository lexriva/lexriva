<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lexriva | Official Luxury Mall</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Inter:wght@400;600;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        :root { --cherry: #72001A; --gold: #D4AF37; --lavender: #F4EFFF; --white: #ffffff; }
        body { font-family: 'Inter', sans-serif; margin: 0; background: var(--lavender); overflow-x: hidden; }
        .page { display: none; max-width: 500px; margin: 0 auto; min-height: 100vh; padding-bottom: 100px; background: #fff; }
        .active { display: block; }
        
        /* Header & Search */
        .header { background: #fff; padding: 15px; text-align: center; border-bottom: 1px solid #eee; position: sticky; top: 0; z-index: 100; }
        .logo { font-family: 'Cinzel'; font-size: 26px; letter-spacing: 5px; color: var(--cherry); font-weight: 900; }
        .search-box { padding: 10px 15px; }
        .search-input { width: 100%; padding: 12px; border-radius: 25px; border: 1px solid #ddd; outline: none; box-sizing: border-box; }

        /* Reel & Scroll Sections */
        .section-title { padding: 15px; font-size: 14px; font-weight: 900; color: var(--cherry); text-transform: uppercase; border-left: 5px solid var(--cherry); margin: 15px; }
        .h-scroll { display: flex; overflow-x: auto; gap: 15px; padding: 0 15px; scrollbar-width: none; }
        .reel-card { min-width: 120px; height: 200px; background: #000; border-radius: 15px; overflow: hidden; position: relative; }
        .reel-card video { width: 100%; height: 100%; object-fit: cover; }
        
        /* Product Cards */
        .prod-card { min-width: 160px; background: #fff; border-radius: 15px; overflow: hidden; border: 1px solid #eee; position: relative; }
        .prod-card img { width: 100%; height: 200px; object-fit: cover; }
        .wish-icon { position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.8); padding: 5px; border-radius: 50%; font-size: 12px; }

        /* Cherry Box */
        .cherry-box { background: var(--cherry); color: var(--gold); border-radius: 20px; padding: 20px; text-align: center; font-family: 'Cinzel'; border: 2px solid var(--gold); margin: 15px; }

        /* Full Pic Product View */
        .full-pic-view { width: 100%; height: 70vh; object-fit: cover; }

        /* Bottom Nav */
        .nav { position: fixed; bottom: 0; width: 100%; max-width: 500px; background: #fff; display: flex; justify-content: space-around; padding: 15px 0; border-top: 1px solid #eee; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); }
        .btn { width: 90%; margin: 15px 5%; padding: 15px; background: var(--cherry); color: #fff; border: none; border-radius: 10px; font-weight: 800; cursor: pointer; }
    </style>
</head>
<body>

<div class="header">
    <div class="logo">LEXRIVA</div>
    <div class="search-box"><input type="text" class="search-input" placeholder="Search luxury products..." id="searchInp" onkeyup="searchFunc()"></div>
</div>

<div id="h-pg" class="page active">
    <div class="section-title">üé¨ Lexriva Reels</div>
    <div class="h-scroll" id="reel-list">
        <div class="reel-card"><video src="r1.mp4" autoplay muted loop playsinline></video></div>
        <div class="reel-card"><video src="r2.mp4" autoplay muted loop playsinline></video></div>
        <div class="reel-card"><video src="r3.mp4" autoplay muted loop playsinline></video></div>
        <div class="reel-card"><video src="r4.mp4" autoplay muted loop playsinline></video></div>
    </div>

    <div id="eid-section"></div>
    <div id="best-section"></div>

    <div class="cherry-box">ESTD 2024<br><span style="font-size:24px">LEXRIVA</span><br>Luxury Mall</div>

    <div class="section-title">Categories</div>
    <div id="cat-list" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px;"></div>
</div>

<div id="p-pg" class="page">
    <div style="position:relative">
        <div style="position:absolute; top:20px; left:20px; background:#fff; padding:10px; border-radius:50%" onclick="showPg('h-pg')">‚Üê</div>
        <img id="p-img" class="full-pic-view">
    </div>
    <div style="padding:20px">
        <h2 id="p-name" style="margin:0; font-family:'Cinzel'"></h2>
        <h3 id="p-price" style="color:var(--cherry)"></h3>
        <p id="p-desc" style="font-size:14px; color:#666"></p>
        <button class="btn" onclick="addToCart()">ADD TO CART</button>
    </div>
</div>

<div id="checkout-pg" class="page">
    <div style="padding:20px">
        <h2 style="text-align:center">Checkout</h2>
        <input type="text" id="cName" class="btn" style="background:#fff; color:#000; border:1px solid #ddd" placeholder="Full Name">
        <input type="email" id="cEmail" class="btn" style="background:#fff; color:#000; border:1px solid #ddd" placeholder="Email">
        <input type="text" id="cMobile" class="btn" style="background:#fff; color:#000; border:1px solid #ddd" placeholder="Mobile Number">
        <input type="text" id="cAddress" class="btn" style="background:#fff; color:#000; border:1px solid #ddd" placeholder="Full Address with Pincode">
        <button class="btn" onclick="placeOrder()">CONFIRM & PAY</button>
    </div>
</div>

<div id="login-pg" class="page">
    <div style="padding:50px 20px; text-align:center">
        <h2 style="font-family:'Cinzel'">Login</h2>
        <input type="email" id="lEmail" class="btn" style="background:#fff; color:#000; border:1px solid #ddd" placeholder="Enter Gmail">
        <button class="btn" onclick="sendOTP()">SEND OTP</button>
        <div id="otp-div" style="display:none">
            <input type="text" id="lOtp" class="btn" style="background:#fff; color:#000; border:1px solid #ddd" placeholder="Enter 4-Digit OTP">
            <button class="btn" onclick="verifyOTP()">VERIFY</button>
        </div>
    </div>
</div>

<div class="nav">
    <div onclick="showPg('h-pg')">Home</div>
    <div onclick="alert('Added to Wishlist!')">Wishlist</div>
    <div onclick="showPg('checkout-pg')">Cart</div>
    <div onclick="showPg('login-pg')">Account</div>
</div>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwdDAiEuLykJJPxRK7Gh89yF-Pmyf71RKMGTh83j-SYe4AGKuqMR1zY9UcrKQbnoFU/exec";
    let storeData = {};
    let currentProd = null;
    let genOtp;

    async function loadStore() {
        const res = await fetch(SCRIPT_URL);
        storeData = await res.json();
        renderHome();
    }

    function renderHome() {
        // Eid & Bestseller
        if(storeData['Eid']) renderSection('eid-section', 'üåô Eid Edits', storeData['Eid']);
        if(storeData['Bestseller']) renderSection('best-section', 'üî• Best Sellers', storeData['Bestseller']);

        // Categories
        const cats = Object.keys(storeData).filter(n => n !== 'Orders' && n !== 'Eid' && n !== 'Bestseller');
        document.getElementById('cat-list').innerHTML = cats.map(c => `
            <div onclick="openCat('${c}')" style="background:var(--lavender); padding:20px; border-radius:15px; text-align:center; font-weight:800; color:var(--cherry)">${c.toUpperCase()}</div>
        `).join('');
    }

    function renderSection(divId, title, data) {
        document.getElementById(divId).innerHTML = `
            <div class="section-title">${title}</div>
            <div class="h-scroll">${data.map(p => `
                <div class="prod-card" onclick="openProd('${p.name}', '${p.price}', '${p.img}', '${p.description}')">
                    <img src="${p.img}">
                    <div class="prod-info"><b>${p.name}</b><br><span style="color:var(--cherry)">‚Çπ${p.price}</span></div>
                </div>
            `).join('')}</div>`;
    }

    function openProd(name, price, img, desc) {
        currentProd = { name, price };
        document.getElementById('p-name').innerText = name;
        document.getElementById('p-price').innerText = "‚Çπ" + price;
        document.getElementById('p-img').src = img;
        document.getElementById('p-desc').innerText = desc || "Luxury product by Lexriva.";
        showPg('p-pg');
    }

    function openCat(catName) {
        // Sub-category logic yahan aayegi
        alert("Opening " + catName + " with sub-categories!");
    }

    // OTP Logic
    function sendOTP() {
        let email = document.getElementById('lEmail').value;
        genOtp = Math.floor(1000 + Math.random() * 9000);
        // EmailJS call yahan karein
        alert("OTP Sent to " + email);
        document.getElementById('otp-div').style.display = 'block';
    }

    function verifyOTP() {
        if(document.getElementById('lOtp').value == genOtp) {
            alert("Login Success!");
            showPg('h-pg');
        } else { alert("Wrong OTP!"); }
    }

    function showPg(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        window.scrollTo(0,0);
    }

    window.onload = loadStore;
</script>
</body>
</html>
