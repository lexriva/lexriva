<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Lexriva | Luxury Mall</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        :root{--lavender:#F4EFFF;--cherry:#72001A;--gold:#D4AF37;--white:#ffffff;--black:#1a1a1a;}
        body{font-family:'Inter',sans-serif;margin:0;background:var(--lavender);color:var(--black);overflow-x:hidden}
        .page{display:none;max-width:500px;margin:0 auto;min-height:100vh;padding-bottom:100px;background:var(--lavender)}
        .active{display:block}
        .header{background:#fff;padding:15px;text-align:center;position:sticky;top:0;z-index:1000;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 10px rgba(0,0,0,0.05)}
        .logo{font-family:'Cinzel';font-size:22px;letter-spacing:4px;font-weight:900;color:var(--cherry);margin-left:auto;margin-right:auto}
        
        /* Search Bar */
        .search-container{padding:10px 15px;background:#fff}
        .search-bar{padding:12px;display:flex;gap:10px;background:var(--lavender);border-radius:15px;border:1px solid #eee}
        
        /* Reels & Categories */
        .section-title{padding:15px;font-size:12px;font-weight:800;color:var(--cherry);letter-spacing:1px}
        .h-scroll{display:flex;overflow-x:auto;gap:15px;padding:0 15px;scrollbar-width:none}
        .reel-item{min-width:160px;height:280px;border-radius:20px;background:#000;overflow:hidden;position:relative;flex-shrink:0;cursor:pointer}
        .reel-item video{width:100%;height:100%;object-fit:cover}
        .reel-tag{position:absolute;bottom:10px;left:10px;background:rgba(255,255,255,0.8);padding:5px 10px;border-radius:10px;font-size:9px;font-weight:800}

        .p-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:15px}
        .p-card{background:#fff;border-radius:20px;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,0.05);position:relative;cursor:pointer}
        .p-card img{width:100%;height:180px;object-fit:cover}
        .wish-icon{position:absolute;top:10px;right:10px;background:rgba(255,255,255,0.8);padding:6px;border-radius:50%;font-size:12px}

        /* Cart Badge */
        .cart-badge{position:absolute;top:-5px;right:-5px;background:var(--cherry);color:#fff;font-size:10px;padding:2px 6px;border-radius:50%}
        
        /* Form & Checkout */
        .checkout-box{background:#fff;padding:25px;border-radius:30px;margin:15px}
        .form-input{width:100%;padding:15px;margin:8px 0;border-radius:12px;border:1px solid #eee;box-sizing:border-box}
        .btn-confirm{width:100%;padding:18px;background:var(--cherry);color:#fff;border:none;border-radius:15px;font-weight:800;cursor:pointer}
        
        /* Bottom Nav */
        .bottom-nav{position:fixed;bottom:0;left:0;right:0;background:#fff;display:flex;justify-content:space-around;padding:15px 0;border-top:1px solid #eee;z-index:1000}
        .nav-btn{font-size:10px;font-weight:700;color:#999;text-align:center;cursor:pointer}
    </style>
</head>
<body>

    <div class="header">
        <span onclick="showPg('acc-pg')">üë§</span>
        <div class="logo">LEXRIVA</div>
        <span style="position:relative" onclick="showPg('cart-pg')">üõí<span class="cart-badge" id="cart-count">0</span></span>
    </div>

    <div class="search-container">
        <div class="search-bar">
            <input type="text" id="searchInput" oninput="handleSearch()" placeholder="Search suits, makeup, bags..." style="flex:1;border:none;outline:none;background:none">
            <span>üîç</span>
        </div>
    </div>

    <div id="h-pg" class="page active">
        <div style="padding:15px"><img src="main_banner.jpg" style="width:100%;border-radius:25px" onerror="this.src='https://via.placeholder.com/500x200?text=EID+SPECIAL+OFFER'"></div>
        
        <div class="section-title">üé¨ TRENDING REELS (TOUCH TO SHOP)</div>
        <div class="h-scroll">
            <div class="reel-item" onclick="openReelProduct(0)"><video src="reel1.mp4" loop muted autoplay playsinline></video><div class="reel-tag">SHOP LOOK</div></div>
            <div class="reel-item" onclick="openReelProduct(1)"><video src="reel2.mp4" loop muted autoplay playsinline></video><div class="reel-tag">SHOP LOOK</div></div>
            <div class="reel-item" onclick="openReelProduct(2)"><video src="reel3.mp4" loop muted autoplay playsinline></video><div class="reel-tag">SHOP LOOK</div></div>
        </div>

        <div class="section-title">üõçÔ∏è SHOP BY CATEGORY</div>
        <div class="p-grid" id="cat-list-home"></div>
    </div>

    <div id="l-pg" class="page">
        <div style="padding:15px;font-weight:800" onclick="showPg('h-pg')">‚Üê BACK</div>
        <div class="p-grid" id="product-list"></div>
    </div>

    <div id="cart-pg" class="page">
        <div style="padding:20px;font-weight:800" onclick="showPg('h-pg')">‚Üê BACK</div>
        <div style="padding:15px">
            <h3 style="font-family:'Cinzel'">Your Luxury Bag</h3>
            <div id="cart-items"></div>
            <div style="background:#fff;padding:20px;border-radius:20px;margin-top:20px">
                <div style="display:flex;justify-content:space-between"><span>Subtotal</span><span id="cart-subtotal">‚Çπ0</span></div>
                <div style="display:flex;justify-content:space-between;margin:10px 0"><span>Delivery Charge</span><span id="cart-delivery">‚Çπ49</span></div>
                <hr>
                <div style="display:flex;justify-content:space-between;font-weight:800;font-size:20px;color:var(--cherry)"><span>Total</span><span id="cart-total">‚Çπ0</span></div>
                <p id="delivery-msg" style="font-size:11px;color:green;margin-top:10px;font-weight:700"></p>
                <p style="font-size:10px;color:red;margin-top:5px">üõ°Ô∏è 2-DAY EXCHANGE POLICY ONLY</p>
            </div>
            <button class="btn-confirm" style="margin-top:20px" onclick="showPg('checkout-pg')">PROCEED TO CHECKOUT</button>
        </div>
    </div>

    <div id="checkout-pg" class="page">
        <div style="padding:20px;font-weight:800" onclick="showPg('cart-pg')">‚Üê BACK</div>
        <div class="checkout-box">
            <h3 style="font-family:'Cinzel'">Shipping Details</h3>
            <form id="orderForm">
                <input type="text" name="name" class="form-input" placeholder="Full Name" required>
                <input type="email" name="email" class="form-input" placeholder="Email Address" required>
                <input type="tel" name="mobile" class="form-input" placeholder="Mobile Number" required>
                <input type="text" name="flat" class="form-input" placeholder="House No / Building" required>
                <input type="text" name="area" class="form-input" placeholder="Area / Road Name" required>
                <div style="display:flex;gap:10px">
                    <input type="text" name="pin" class="form-input" placeholder="Pincode" required>
                    <input type="text" name="city" class="form-input" placeholder="City" required>
                </div>
                <button type="submit" class="btn-confirm" id="submit-btn" style="margin-top:15px">PLACE ORDER (COD)</button>
            </form>
        </div>
    </div>

    <div id="success-pg" class="page">
        <div style="text-align:center;padding:100px 20px">
            <h1 style="font-size:60px">üíé</h1>
            <h2 style="font-family:'Cinzel'">Order Confirmed!</h2>
            <p style="color:#666">Check your email for tracking details.</p>
            <button class="btn-confirm" onclick="location.reload()">CONTINUE SHOPPING</button>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-btn" onclick="showPg('h-pg')">HOME</div>
        <div class="nav-btn" onclick="showPg('l-pg')">SHOP</div>
        <div class="nav-btn" onclick="showPg('cart-pg')">BAG</div>
        <div class="nav-btn" onclick="showPg('acc-pg')">LOGIN</div>
    </div>

<script>
let store = {eid:[], latest:[]};
let cart = [];
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxvD9KIRJUN5YumkpKW5K7osSC4N0xH5kfwBT4ojQupvw__ROi3YBqizHicfp6pgf7Ekw/exec";

const subMap = {
    'Western': ['Dresses','Tops','Jeans','Co-ords'],
    'Ethnic': ['Saree','Kurtis','Lehenga','Suit'],
    'Footwear': ['Heels','Sandals','Sneakers'],
    'Makeup': ['Lipstick','Nails','Eyes','Perfumes'],
    'Jewellery': ['Necklace','Earrings','Rings'],
    'Bags': ['Handbags','Sling Bags','Clutches']
};

async function init() {
    try {
        const r = await fetch('products.json');
        store = await r.json();
        renderCategories();
    } catch(e) {}
}

function renderCategories() {
    const cats = Object.keys(subMap);
    document.getElementById('cat-list-home').innerHTML = cats.map(c => `
        <div class="p-card" onclick="filterByCat('${c}')">
            <img src="cat_${c.toLowerCase()}.jpg" onerror="this.src='https://via.placeholder.com/200x200?text=${c}'">
            <div style="padding:10px;text-align:center;font-weight:800;font-size:10px">${c.toUpperCase()}</div>
        </div>`).join('');
}

function handleSearch() {
    const query = document.getElementById('searchInput').value.toLowerCase();
    const all = [...store.eid, ...store.latest];
    const filtered = all.filter(p => p.n.toLowerCase().includes(query) || p.sub.toLowerCase().includes(query));
    showPg('l-pg');
    renderProducts(filtered);
}

function filterByCat(c) {
    const all = [...store.eid, ...store.latest];
    const filtered = all.filter(p => p.cat === c);
    showPg('l-pg');
    renderProducts(filtered);
}

function renderProducts(arr) {
    document.getElementById('product-list').innerHTML = arr.map(p => `
        <div class="p-card" onclick='openDet(${JSON.stringify(p)})'>
            <span class="wish-icon">ü§ç</span>
            <img src="${p.i1}">
            <div style="padding:10px;text-align:center">
                <div style="font-size:11px;height:30px;overflow:hidden">${p.n}</div>
                <div style="color:var(--cherry);font-weight:800">‚Çπ${p.p}</div>
            </div>
        </div>`).join('');
}

function updateCartUI() {
    document.getElementById('cart-count').innerText = cart.length;
    let subtotal = cart.reduce((s, i) => s + parseInt(i.p), 0);
    let delivery = (subtotal > 0 && subtotal < 1999) ? 49 : 0;
    
    document.getElementById('cart-subtotal').innerText = '‚Çπ' + subtotal;
    document.getElementById('cart-delivery').innerText = (delivery === 0 && subtotal > 0) ? 'FREE' : '‚Çπ' + delivery;
    document.getElementById('cart-total').innerText = '‚Çπ' + (subtotal + delivery);
    document.getElementById('delivery-msg').innerText = subtotal >= 1999 ? "üéâ Free Delivery Applied!" : "Add ‚Çπ" + (1999 - subtotal) + " more for FREE Delivery";
}

document.getElementById('orderForm').onsubmit = async (e) => {
    e.preventDefault();
    const btn = document.getElementById('submit-btn');
    btn.innerText = "Placing Order...";
    btn.disabled = true;
    try {
        await fetch(SCRIPT_URL, { method: 'POST', body: new FormData(e.target)});
        showPg('success-pg');
    } catch (e) { showPg('success-pg'); }
};

function showPg(id){
    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    window.scrollTo(0,0);
}

function openReelProduct(idx) {
    alert("Opening Product featured in Reel " + (idx+1));
}

window.onload = init;
</script>
</body>
</html>
