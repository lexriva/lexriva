<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Lexriva | Luxury Mall</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        :root{ --lavender:#F4EFFF; --cherry:#72001A; --gold:#D4AF37; --white:#ffffff; }
        body{font-family:'Inter',sans-serif;margin:0;background:var(--lavender);overflow-x:hidden}
        .page{display:none;max-width:500px;margin:0 auto;min-height:100vh;padding-bottom:100px;background:var(--lavender)}
        .active{display:block}
        .header{background:#fff;padding:20px;text-align:center;position:sticky;top:0;z-index:1000}
        .logo{font-family:'Cinzel';font-size:26px;letter-spacing:6px;font-weight:900;color:var(--cherry)}
        
        /* SEARCH & SECTIONS */
        .search-wrapper { padding: 5px 20px 15px; background: #fff; border-bottom: 1px solid #eee; }
        .search-input { width: 100%; padding: 12px 20px; border-radius: 25px; border: 1px solid #eee; background: #f9f9f9; outline: none; box-sizing: border-box; }
        .section-h{padding:15px;font-size:11px;font-weight:800;text-transform:uppercase;color:var(--cherry)}
        .h-scroll{display:flex;overflow-x:auto;gap:15px;padding:0 15px;scrollbar-width:none}
        .scroll-item{min-width:140px;text-align:center;background:#fff;padding:10px;border-radius:20px;box-shadow:0 10px 20px rgba(0,0,0,0.05); position:relative;}
        .scroll-item img{width:120px;height:160px;border-radius:15px;object-fit:cover}

        /* CATEGORY & SUB GRID */
        .cat-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:15px}
        .cat-card{position:relative;border-radius:20px;overflow:hidden;height:180px;box-shadow:0 8px 15px rgba(0,0,0,0.05); cursor:pointer}
        .cat-card img{width:100%;height:100%;object-fit:cover}
        .cat-label{position:absolute;bottom:10px;left:10px;color:#fff;font-size:10px;font-weight:800;text-shadow:0 2px 4px rgba(0,0,0,0.5)}

        /* SUB GRID & CHERRY BOX */
        .sub-grid{display:grid;grid-template-columns:repeat(3,1fr);background:var(--lavender);padding:10px 0;}
        .sub-item{padding:15px 5px;text-align:center;display:flex;flex-direction:column;align-items:center; cursor:pointer}
        .sub-item img{width:80px;height:80px;border-radius:50%;object-fit:cover;margin-bottom:8px;box-shadow:0 4px 10px rgba(0,0,0,0.1); border: 2px solid #fff;}
        .cherry-box{background:var(--cherry); color:var(--gold); border-radius:120px 120px 10px 10px; margin:15px auto; width:110px; height:160px; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; font-family:'Cinzel'; border:2px solid var(--gold);}

        /* PRODUCT PAGE FULL PIC */
        .p-gallery-img { width: 100%; height: 500px; object-fit: cover; }
        .option-btn { padding: 10px 18px; border: 1px solid #ddd; margin: 5px; border-radius: 8px; cursor: pointer; display: inline-block; font-size: 12px; }
        .option-btn.selected { background: var(--cherry); color: #fff; border-color: var(--cherry); }

        .btn-group{display:flex; gap:10px; padding:15px; background:#fff; position:fixed; bottom:0; left:0; right:0; max-width:500px; margin:0 auto; z-index:1001}
        .buy-btn{flex:1; padding:18px; background:var(--cherry); color:#fff; border:none; border-radius:15px; font-weight:800; cursor:pointer}
        .checkout-input{width:100%; padding:15px; margin:8px 0; border:1px solid #ddd; border-radius:12px; box-sizing:border-box}

        .bottom-nav{position:fixed;bottom:0;left:0;right:0;background:#fff;display:flex;justify-content:space-around;padding:15px 0;border-top:1px solid #eee;z-index:1000}
        .nav-btn { font-size: 9px; font-weight: 800; color: #999; text-align: center; cursor: pointer; }
    </style>
</head>
<body>

<div class="header"><div class="logo">LEXRIVA</div></div>
<div class="search-wrapper"><input type="text" id="mainSearch" class="search-input" placeholder="Search Jewelry, Suits, Bags..." oninput="filterSearch()"></div>

<div id="h-pg" class="page active">
    <div style="padding:0 15px"><img src="main_banner.jpg" style="width:100%;border-radius:25px" onerror="this.src='https://via.placeholder.com/500x250?text=Luxury+Mall'"></div>
    
    <div class="section-h">üåô THE EID EDIT</div><div id="eid-scroll" class="h-scroll">Loading...</div>
    
    <div class="section-h">üé¨ TRENDING REELS</div>
    <div class="h-scroll" style="padding-bottom:15px">
        <div style="min-width:220px;height:380px;background:#000;border-radius:20px;overflow:hidden" onclick="openSub('western')"><video src="reel1.mp4" autoplay muted loop playsinline style="width:100%;height:100%;object-fit:cover"></video></div>
        <div style="min-width:220px;height:380px;background:#000;border-radius:20px;overflow:hidden" onclick="openSub('ethnic')"><video src="reel2.mp4" autoplay muted loop playsinline style="width:100%;height:100%;object-fit:cover"></video></div>
    </div>

    <div class="section-h">üî• BESTSELLERS</div><div id="best-scroll" class="h-scroll">Loading...</div>

    <div class="section-h">üõçÔ∏è CURATED CATEGORIES</div>
    <div class="cat-grid">
        <div class="cat-card" onclick="openSub('western')"><img src="western.jpg"><div class="cat-label">WESTERN WEAR</div></div>
        <div class="cat-card" onclick="openSub('ethnic')"><img src="ethnic.jpg"><div class="cat-label">ETHNIC WEAR</div></div>
        <div class="cat-card" onclick="openSub('makeup_cat')"><img src="makeup.jpg"><div class="cat-label">BEAUTY & CARE</div></div>
        <div class="cat-card" onclick="openSub('jewellery_master')"><img src="jewel.jpg"><div class="cat-label">FINE JEWELLERY</div></div>
        <div class="cat-card" onclick="openSub('bags')"><img src="bags.jpg"><div class="cat-label">LUXURY BAGS</div></div>
        <div class="cat-card" onclick="openSub('footwear')"><img src="footwear.jpg"><div class="cat-label">FOOTWEAR EDIT</div></div>
        <div class="cat-card" onclick="openSub('acc_main')"><img src="acc.jpg"><div class="cat-label">ACCESSORIES</div></div>
    </div>
</div>

<div id="s-pg" class="page">
    <div style="padding:20px;font-weight:800;color:var(--cherry);cursor:pointer" onclick="showPg('h-pg')">‚Üê BACK</div>
    <div id="s-grid" class="sub-grid"></div>
</div>

<div id="p-pg" class="page">
    <div style="padding:20px;font-weight:800;color:var(--cherry);cursor:pointer" onclick="showPg('h-pg')">‚Üê BACK</div>
    <img id="p-img-main" class="p-gallery-img">
    <div style="padding:20px; background:#fff; border-radius:30px 30px 0 0; margin-top:-30px; position:relative; z-index:10">
        <h2 id="p-name" style="color:var(--cherry); margin:0"></h2>
        <p id="p-price" style="font-weight:900; font-size:24px; margin:10px 0"></p>
        <div id="color-area"></div>
        <div id="size-area" style="margin-top:10px"></div>
        <p id="p-desc" style="font-size:14px; color:#666; margin-top:15px"></p>
    </div>
    <div class="btn-group">
        <button class="buy-btn" onclick="showPg('checkout-pg')">BUY NOW</button>
    </div>
</div>

<div id="checkout-pg" class="page">
    <div style="padding:20px;font-weight:800;color:var(--cherry);cursor:pointer" onclick="showPg('p-pg')">‚Üê BACK</div>
    <div style="padding:20px">
        <h2 style="font-family:'Cinzel'; text-align:center">Checkout</h2>
        <input id="cName" class="checkout-input" placeholder="Full Name">
        <input id="cMobile" class="checkout-input" placeholder="Mobile Number">
        <input id="cAddress" class="checkout-input" placeholder="House No / Area / City">
        <input id="cPincode" class="checkout-input" placeholder="Pincode">
        <button class="buy-btn" onclick="confirmOrder()">PLACE ORDER</button>
    </div>
</div>

<div class="bottom-nav">
    <div class="nav-btn" onclick="showPg('h-pg')">HOME</div>
    <div class="nav-btn" onclick="alert('Wishlist Ready!')">WISHLIST</div>
    <div class="nav-btn" onclick="alert('Login with OTP Ready!')">ACCOUNT</div>
</div>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwdDAiEuLykJJPxRK7Gh89yF-Pmyf71RKMGTh83j-SYe4AGKuqMR1zY9UcrKQbnoFU/exec";
    let storeData = {};
    let selectedItem = null;
    let selColor = "";
    let selSize = "";

    const subMap = {
        'western': ['Dresses','Tops','Jeans','T-shirt','LEXRIVA','Jumpsuit','Co-ords','Sleep Wear','Trousers','Shorts','Skirts','Jackets'],
        'ethnic': ['Saree','Kurtis','Dress Material','Lehengas','LEXRIVA','Gowns','Anarkali','Suits','Palazzo','Sharara','Dupatta'],
        'makeup_cat': ['Lipstick','Foundation','Kajal','Mascara','Eyeliner','Perfumes','Compact','LEXRIVA','Kajal'],
        'jewellery_master': ['Minimal','Necklace','Earrings','Rings','Bracelet','Bridal','Jhumka','LEXRIVA','Korean'],
        'bags': ['Handbags','Sling Bags','Wallets','LEXRIVA','Clutches','Totes'],
        'footwear': ['Heels','Sandals','Boots','LEXRIVA','Sneakers','Flats','Ethnic','Wedges'],
        'acc_main': ['Hair Acc','Belts','Sunglasses','LEXRIVA','Watches','Socks','Caps']
    };

    async function init() {
        const res = await fetch(SCRIPT_URL);
        storeData = await res.json();
        renderHome();
    }

    function renderHome() {
        if(storeData['Eid']) document.getElementById('eid-scroll').innerHTML = storeData['Eid'].map(p => renderCard(p)).join('');
        if(storeData['Bestseller']) document.getElementById('best-scroll').innerHTML = storeData['Bestseller'].map(p => renderCard(p)).join('');
    }

    function renderCard(p) {
        return `<div class="scroll-item" onclick='openP(${JSON.stringify(p).replace(/'/g, "&apos;")})'><img src="${p.img}"><p style="font-size:10px;font-weight:700">‚Çπ${p.price}</p></div>`;
    }

    function openSub(k) {
        showPg('s-pg');
        let h = "";
        let items = subMap[k] || [];
        items.forEach((n, index) => {
            if (n === 'LEXRIVA') h += `<div class="cherry-box"><span style="font-size:10px">ESTD. 2024</span><br><span style="font-size:16px; letter-spacing:2px">LEXRIVA</span></div>`;
            else h += `<div class="sub-item" onclick="alert('Opening '+n)"><img src="${n.toLowerCase().replace(/ /g,'_')}.jpg" onerror="this.src='https://via.placeholder.com/80?text=${n}'"><p style="font-size:9px;font-weight:700;text-transform:uppercase">${n}</p></div>`;
        });
        document.getElementById('s-grid').innerHTML = h;
    }

    function openP(p) {
        selectedItem = p;
        showPg('p-pg');
        document.getElementById('p-img-main').src = p.img;
        document.getElementById('p-name').innerText = p.name;
        document.getElementById('p-price').innerText = "‚Çπ" + p.price;
        document.getElementById('p-desc').innerText = p.description || "Luxury item by Lexriva.";
        
        let colors = p.colour ? p.colour.split(',') : ['Default'];
        let sizes = p.size ? p.size.split(',') : ['S','M','L','XL'];
        document.getElementById('color-area').innerHTML = colors.map(c => `<div class="option-btn" onclick="setOpt('c','${c.trim()}',this)">${c.trim()}</div>`).join('');
        document.getElementById('size-area').innerHTML = sizes.map(s => `<div class="option-btn" onclick="setOpt('s','${s.trim()}',this)">${s.trim()}</div>`).join('');
    }

    function setOpt(t, v, el) {
        Array.from(el.parentElement.children).forEach(x => x.classList.remove('selected'));
        el.classList.add('selected');
        if(t==='c') selColor = v; else selSize = v;
    }

    async function confirmOrder() {
        const d = { name: document.getElementById('cName').value, mobile: document.getElementById('cMobile').value, flat: document.getElementById('cAddress').value, pincode: document.getElementById('cPincode').value, product: selectedItem.name, price: selectedItem.price, colour: selColor, size: selSize };
        await fetch(SCRIPT_URL, { method: 'POST', body: JSON.stringify(d) });
        alert("Order Placed Successfully!");
        showPg('h-pg');
    }

    function showPg(id) { document.querySelectorAll('.page').forEach(p => p.classList.remove('active')); document.getElementById(id).classList.add('active'); window.scrollTo(0,0); }
    window.onload = init;
</script>
</body>
</html>
