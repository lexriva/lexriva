<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Lexriva | Luxury Mall</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        :root { --lavender: #F4EFFF; --cherry: #72001A; --gold: #D4AF37; --white: #ffffff; }
        body { font-family: 'Inter', sans-serif; margin: 0; background: var(--lavender); overflow-x: hidden; }
        .page { display: none; max-width: 500px; margin: 0 auto; min-height: 100vh; padding-bottom: 100px; background: var(--lavender); }
        .active { display: block; }
        
        /* HEADER & SEARCH */
        .header { background: #fff; padding: 20px; text-align: center; position: sticky; top: 0; z-index: 1000; }
        .logo { font-family: 'Cinzel'; font-size: 26px; letter-spacing: 6px; font-weight: 900; color: var(--cherry); }
        .search-wrapper { padding: 5px 20px 15px; background: #fff; border-bottom: 1px solid #eee; }
        .search-input { width: 100%; padding: 12px 20px; border-radius: 25px; border: 1px solid #eee; background: #f9f9f9; outline: none; font-size: 13px; box-sizing: border-box; }

        /* SECTIONS & SCROLLS */
        .section-h { padding: 15px; font-size: 11px; font-weight: 800; text-transform: uppercase; color: var(--cherry); letter-spacing: 1px; }
        .h-scroll { display: flex; overflow-x: auto; gap: 15px; padding: 0 15px; scrollbar-width: none; }
        .scroll-item { min-width: 140px; text-align: center; background: #fff; padding: 10px; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); position: relative; }
        .scroll-item img { width: 120px; height: 160px; border-radius: 15px; object-fit: cover; }

        /* REELS */
        .reel-box { min-width: 220px; height: 380px; background: #000; border-radius: 20px; overflow: hidden; position: relative; }
        .reel-box video { width: 100%; height: 100%; object-fit: cover; }

        /* CATEGORY GRID (Front Page) */
        .cat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 15px; }
        .cat-card { position: relative; border-radius: 20px; overflow: hidden; height: 180px; box-shadow: 0 8px 15px rgba(0,0,0,0.05); cursor: pointer; }
        .cat-card img { width: 100%; height: 100%; object-fit: cover; }
        .cat-label { position: absolute; bottom: 0; width: 100%; background: rgba(114,0,26,0.8); color: #fff; text-align: center; padding: 8px 0; font-size: 9px; font-weight: 800; }

        /* SUB-CATEGORY CIRCULAR GRID */
        .sub-grid { display: grid; grid-template-columns: repeat(3, 1fr); background: var(--lavender); padding: 10px 0; gap: 10px; }
        .sub-item { padding: 15px 5px; text-align: center; display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .sub-item img { width: 85px; height: 85px; border-radius: 50%; object-fit: cover; margin-bottom: 8px; border: 2px solid #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .sub-item p { font-size: 9px; font-weight: 800; text-transform: uppercase; color: #444; }

        /* CHERRY BOX (Bich Mein) */
        .cherry-box { background: var(--cherry); color: var(--gold); border-radius: 120px 120px 10px 10px; margin: 15px auto; width: 130px; height: 180px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; font-family: 'Cinzel'; border: 2px solid var(--gold); box-shadow: 0 10px 25px rgba(114,0,26,0.3); }

        /* PRODUCT DETAIL PAGE */
        .p-gallery-img { min-width: 100%; height: 500px; object-fit: cover; }
        .option-btn { padding: 8px 15px; border: 1px solid #ddd; margin: 5px; border-radius: 8px; cursor: pointer; font-size: 12px; background: #fff; display: inline-block; }
        .option-btn.selected { background: var(--cherry); color: #fff; border-color: var(--cherry); }

        /* BUTTONS & NAV */
        .btn-group { display: flex; gap: 10px; padding: 15px; background: #fff; position: fixed; bottom: 0; width: 100%; max-width: 500px; z-index: 1001; box-sizing: border-box; }
        .buy-btn { flex: 1; padding: 18px; background: var(--cherry); color: #fff; border: none; border-radius: 15px; font-weight: 800; cursor: pointer; }
        .bottom-nav { position: fixed; bottom: 0; width: 100%; max-width: 500px; background: #fff; display: flex; justify-content: space-around; padding: 15px 0; border-top: 1px solid #eee; z-index: 1000; }
        .nav-btn { font-size: 9px; font-weight: 800; color: #999; text-align: center; cursor: pointer; }
        
        /* FORM INPUTS */
        .checkout-input { width: 100%; padding: 15px; margin: 8px 0; border: 1px solid #ddd; border-radius: 12px; box-sizing: border-box; font-family: 'Inter'; }
    </style>
</head>
<body>

<div class="header"><div class="logo">LEXRIVA</div></div>
<div class="search-wrapper"><input type="text" id="mainSearch" class="search-input" placeholder="Search Jewelry, Suits, Bags..." oninput="filterSearch()"></div>

<div id="h-pg" class="page active">
    <div style="padding:0 15px"><img src="main_banner.jpg" style="width:100%; border-radius:25px" onerror="this.src='https://via.placeholder.com/500x250?text=Luxury+Mall'"></div>
    
    <div class="section-h">üé¨ TRENDING REELS</div>
    <div class="h-scroll">
        <div class="reel-box"><video src="reel1.mp4" autoplay muted loop playsinline></video></div>
        <div class="reel-box"><video src="reel2.mp4" autoplay muted loop playsinline></video></div>
    </div>

    <div class="section-h">üåô THE EID EDIT</div>
    <div id="eid-scroll" class="h-scroll">Loading Eid Collection...</div>

    <div class="section-h">üî• BESTSELLERS</div>
    <div id="best-scroll" class="h-scroll">Loading Bestsellers...</div>

    <div class="section-h">üëó CURATED CATEGORIES</div>
    <div class="cat-grid">
        <div class="cat-card" onclick="openSub('western')"><img src="western.jpg"><div class="cat-label">WESTERN WEAR</div></div>
        <div class="cat-card" onclick="openSub('ethnic')"><img src="ethnic.jpg"><div class="cat-label">ETHNIC WEAR</div></div>
        <div class="cat-card" onclick="openSub('makeup_cat')"><img src="makeup.jpg"><div class="cat-label">MAKEUP & CARE</div></div>
        <div class="cat-card" onclick="openSub('jewellery_master')"><img src="jewel.jpg"><div class="cat-label">FINE JEWELLERY</div></div>
        <div class="cat-card" onclick="openSub('bags')"><img src="bags.jpg"><div class="cat-label">LUXURY BAGS</div></div>
        <div class="cat-card" onclick="openSub('footwear')"><img src="footwear.jpg"><div class="cat-label">FOOTWEAR EDIT</div></div>
        <div class="cat-card" onclick="openSub('acc_main')"><img src="acc.jpg"><div class="cat-label">ACCESSORIES</div></div>
    </div>
</div>

<div id="s-pg" class="page">
    <div style="padding:20px; font-weight:800; color:var(--cherry); cursor:pointer" onclick="showPg('h-pg')">‚Üê BACK</div>
    <div id="s-banner" style="width:92%; height:180px; margin:0 auto; border-radius:20px; overflow:hidden"></div>
    <div id="s-grid" class="sub-grid"></div>
</div>

<div id="p-pg" class="page">
    <div style="padding:20px; font-weight:800; color:var(--cherry); cursor:pointer" onclick="showPg('h-pg')">‚Üê BACK</div>
    <div id="p-gallery" style="display:flex; overflow-x:auto; scroll-snap-type:x mandatory; scrollbar-width:none"></div>
    <div style="padding:25px; background:#fff; border-radius:30px 30px 0 0; margin-top:-30px; position:relative; z-index:10">
        <h2 id="p-name" style="color:var(--cherry); margin:0"></h2>
        <p id="p-price" style="font-weight:900; font-size:24px; margin:10px 0"></p>
        <div style="font-size:11px; font-weight:700; color:#888; margin-top:15px">CHOOSE COLOR</div>
        <div id="color-options" style="margin-top:5px"></div>
        <div style="font-size:11px; font-weight:700; color:#888; margin-top:15px">CHOOSE SIZE</div>
        <div id="size-options" style="margin-top:5px"></div>
        <p id="p-desc" style="font-size:14px; color:#666; margin-top:20px; line-height:1.6"></p>
    </div>
    <div class="btn-group">
        <button class="buy-btn" onclick="showPg('checkout-pg')">BUY NOW</button>
    </div>
</div>

<div id="checkout-pg" class="page">
    <div style="padding:20px; font-weight:800; color:var(--cherry); cursor:pointer" onclick="showPg('p-pg')">‚Üê BACK</div>
    <div style="padding:20px">
        <h2 style="font-family:'Cinzel'; text-align:center; color:var(--cherry)">Shipping Details</h2>
        <input id="cName" class="checkout-input" placeholder="Full Name">
        <input id="cEmail" class="checkout-input" placeholder="Email Address">
        <input id="cMobile" class="checkout-input" placeholder="Mobile Number">
        <input id="cFlat" class="checkout-input" placeholder="Flat / House No. / Building">
        <input id="cArea" class="checkout-input" placeholder="Area / Colony / Street">
        <input id="cCity" class="checkout-input" placeholder="City">
        <input id="cPincode" class="checkout-input" placeholder="Pincode">
        <button class="buy-btn" style="width:100%; margin-top:20px" onclick="confirmOrder()">CONFIRM & PLACE ORDER</button>
    </div>
</div>

<div class="bottom-nav">
    <div class="nav-btn" onclick="showPg('h-pg')">HOME</div>
    <div class="nav-btn" onclick="alert('Wishlist')">WISHLIST</div>
    <div class="nav-btn" onclick="alert('Account')">ACCOUNT</div>
</div>

<script>
const ADMIN_URL="https://script.google.com/macros/s/AKfycbwdDAiEuLykJJPxRK7Gh89yF-Pmyf71RKMGTh83j-SYe4AGKuqMR1zY9UcrKQbnoFU/exec";
let store={}; let currentP={}; let selColor=""; let selSize="";

const subMap={
    'western':['Dresses','Tops','Jeans','T-shirt','LEXRIVA','Jumpsuit','Co-ords','Sleep Wear','Trousers','Shorts','Skirts','Jackets'],
    'ethnic':['Saree','Kurtis','Dress Material','Lehengas','LEXRIVA','Gowns','Anarkali','Suits','Palazzo','Sharara','Dupatta'],
    'makeup_cat':['Lipstick','Lip Gloss','Lip Liner','LEXRIVA','Foundation','Compact','Concealer','Eyeliner','Kajal','Mascara','Perfumes'],
    'jewellery_master':['Minimal','Necklace Set','Earrings','Maangtika','LEXRIVA','Rings','Bracelet','Bridal','Jhumka','Kashmiri','Korean'],
    'bags':['Handbags','Sling Bags','Wallets','LEXRIVA','Clutches','Totes'],
    'footwear':['Heels','Sandals','Boots','LEXRIVA','Sneakers','Flats','Ethnic','Wedges'],
    'acc_main':['Hair Acc','Belts','Sunglasses','LEXRIVA','Watches','Socks','Caps']
};

async function init(){ 
    try {
        const r = await fetch(ADMIN_URL); 
        store = await r.json(); 
        renderH(); 
    } catch(e) { console.log("Loading error..."); }
}

function renderH(){
    document.getElementById('eid-scroll').innerHTML=(store.Eid||[]).map(p=>renderItem(p)).join('');
    document.getElementById('best-scroll').innerHTML=(store.Bestseller||[]).map(p=>renderItem(p)).join('');
}

function renderItem(p){
    return `<div class="scroll-item" onclick="openP('${p.name}','${p.price}','${p.img}','${p.description}','${p.colour}','${p.size}')">
                <img src="${p.img}">
                <p style="font-size:11px;font-weight:700;margin:5px 0">‚Çπ${p.price}</p>
            </div>`;
}

function openP(n,p,i,d,c,s){
    currentP={n,p,i};
    document.getElementById('p-name').innerText=n;
    document.getElementById('p-price').innerText="‚Çπ"+p;
    document.getElementById('p-desc').innerText=d || "Luxury product by Lexriva.";
    document.getElementById('p-gallery').innerHTML=`<img src="${i}" class="p-gallery-img">`;
    document.getElementById('color-options').innerHTML=c.split(',').map(v=>`<div class="option-btn" onclick="selOpt(this,'c','${v.trim()}')">${v.trim()}</div>`).join('');
    document.getElementById('size-options').innerHTML=s.split(',').map(v=>`<div class="option-btn" onclick="selOpt(this,'s','${v.trim()}')">${v.trim()}</div>`).join('');
    showPg('p-pg');
}

function selOpt(el,t,v){
    el.parentElement.querySelectorAll('.option-btn').forEach(x=>x.classList.remove('selected'));
    el.classList.add('selected'); if(t==='c') selColor=v; else selSize=v;
}

function openSub(k){
    showPg('s-pg');
    document.getElementById('s-banner').innerHTML=`<img src="${k}_banner.jpg" style="width:100%;height:100%;object-fit:cover" onerror="this.src='main_banner.jpg'">`;
    let h=""; 
    (subMap[k]||[]).forEach(n=>{
        if(n === 'LEXRIVA') h+=`<div class="cherry-box"><span style="font-size:10px">ESTD. 2024</span><br><span style="font-size:18px;letter-spacing:2px">LEXRIVA</span><br><span style="font-size:8px">LUXURY MALL</span></div>`;
        else h+=`<div class="sub-item" onclick="alert('Opening '+n)"><img src="${n.toLowerCase().replace(/ /g,'_')}.jpg" onerror="this.src='https://via.placeholder.com/100?text=${n}'"><p>${n}</p></div>`;
    });
    document.getElementById('s-grid').innerHTML=h;
}

async function confirmOrder(){
    let data = {
        name: document.getElementById('cName').value,
        email: document.getElementById('cEmail').value,
        mobile: document.getElementById('cMobile').value,
        flat: document.getElementById('cFlat').value,
        area: document.getElementById('cArea').value,
        city: document.getElementById('cCity').value,
        pincode: document.getElementById('cPincode').value,
        product: currentP.n,
        price: currentP.p,
        colour: selColor,
        size: selSize
    };
    if(!data.name || !data.mobile || !selColor || !selSize) return alert("Sahi Details aur Size/Color bhariye!");
    
    try {
        await fetch(ADMIN_URL, {method:'POST', body:JSON.stringify(data)});
        alert("Shukriya! Aapka Order Place ho gaya hai.");
        showPg('h-pg');
    } catch(e) { alert("Order Recorded!"); showPg('h-pg'); }
}

function showPg(id){
    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    window.scrollTo(0,0);
}
window.onload=init;
</script>
</body>
</html>
