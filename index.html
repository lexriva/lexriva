<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Lexriva | Luxury Mall</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root{ --lavender:#F4EFFF; --cherry:#72001A; --gold:#D4AF37; --white:#ffffff; }
        body{font-family:'Inter',sans-serif;margin:0;background:var(--lavender);overflow-x:hidden}
        .page{display:none;max-width:500px;margin:0 auto;min-height:100vh;padding-bottom:100px;background:var(--lavender)}
        .active{display:block}
        .header{background:#fff;padding:20px 15px;text-align:center;position:sticky;top:0;z-index:1000}
        .logo{font-family:'Cinzel';font-size:26px;letter-spacing:5px;font-weight:900;color:var(--cherry)}
        
        /* IMAGE GRID STYLE */
        #p-grid-gallery { display: grid; grid-template-columns: 1fr; gap: 5px; background: #fff; padding: 5px; }
        #p-grid-gallery img { width: 100%; border-radius: 10px; object-fit: cover; }
        #p-grid-gallery img:first-child { height: 450px; } /* Main image badi dikhegi */
        #p-grid-gallery .sub-imgs { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }
        #p-grid-gallery .sub-imgs img { height: 200px; }

        .section-h{padding:15px;font-size:11px;font-weight:800;text-transform:uppercase;color:var(--cherry)}
        .h-scroll{display:flex;overflow-x:auto;gap:15px;padding:0 15px;scrollbar-width:none}
        .scroll-item{min-width:140px;text-align:center;background:#fff;padding:10px;border-radius:20px;box-shadow:0 10px 20px rgba(0,0,0,0.05); cursor:pointer;}
        .scroll-item img{width:120px;height:160px;border-radius:15px;object-fit:cover}

        .cat-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:15px}
        .cat-card{position:relative;border-radius:25px;overflow:hidden;height:180px;box-shadow:0 8px 15px rgba(0,0,0,0.05); cursor:pointer}
        .cat-card img{width:100%;height:100%;object-fit:cover}
        .cat-label{position:absolute;bottom:12px;left:12px;color:#fff;font-size:10px;font-weight:800;text-shadow:0 2px 4px rgba(0,0,0,0.5)}

        .sub-grid{display:grid;grid-template-columns:repeat(3,1fr);background:var(--lavender);padding:10px 0;}
        .sub-item{padding:15px 5px;text-align:center;display:flex;flex-direction:column;align-items:center; cursor:pointer}
        .sub-item img{width:85px;height:85px;border-radius:50%;object-fit:cover;margin-bottom:8px;box-shadow:0 4px 10px rgba(0,0,0,0.1); border: 2px solid #fff;}

        .desc-box { background: #f9f9f9; padding: 15px; border-radius: 15px; margin-top: 15px; border: 1px solid #eee; }
        .desc-text { font-size: 12px; line-height: 1.6; color: #555; white-space: pre-wrap; }

        .btn-group{display:flex; gap:10px; padding:15px; background:#fff; position:fixed; bottom:0; left:0; right:0; max-width:500px; margin:0 auto; z-index:1001}
        .buy-btn{flex:1; padding:18px; background:var(--cherry); color:#fff; border:none; border-radius:15px; font-weight:800; cursor:pointer}
        
        .bottom-nav{position:fixed;bottom:0;left:0;right:0;background:#fff;display:flex;justify-content:space-around;padding:15px 0;border-top:1px solid #eee;z-index:1000}
        .nav-btn{font-size:10px;font-weight:800;color:#999;cursor:pointer;text-align:center;}
        .chip { display: inline-block; padding: 8px 15px; border: 1px solid #ddd; border-radius: 8px; margin: 4px; cursor: pointer; font-size: 11px; background: #fff; font-weight: 700;}
        .chip.selected { background: var(--cherry); color: #fff; border-color: var(--cherry); }
    </style>
</head>
<body>

<div class="header"><div class="logo">LEXRIVA</div></div>

<div id="h-pg" class="page active">
    <div style="padding:0 15px"><img src="main_banner.jpg" style="width:100%;border-radius:25px"></div>
    <div class="section-h">üåô THE EID EDIT</div><div id="eid-scroll" class="h-scroll"></div>
    <div class="section-h">üëó CATEGORIES</div>
    <div class="cat-grid">
        <div class="cat-card" onclick="openSub('western')"><img src="cat_western.jpg"><div class="cat-label">WESTERN</div></div>
        <div class="cat-card" onclick="openSub('ethnic')"><img src="cat_ethnic.jpg"><div class="cat-label">ETHNIC</div></div>
    </div>
</div>

<div id="s-pg" class="page"><div style="padding:20px;font-weight:800;color:var(--cherry);cursor:pointer" onclick="showPg('h-pg')">‚Üê BACK</div><div id="s-grid" class="sub-grid"></div></div>
<div id="p-list-pg" class="page"><div style="padding:20px;font-weight:800;color:var(--cherry);cursor:pointer" onclick="showPg('s-pg')">‚Üê BACK</div><div id="p-list-grid" class="cat-grid"></div></div>

<div id="p-pg" class="page">
    <div style="padding:20px;font-weight:800;color:var(--cherry);cursor:pointer" onclick="showPg('h-pg')">‚Üê BACK</div>
    <div id="p-grid-gallery"></div>
    
    <div style="padding:20px; background:#fff; border-radius:30px 30px 0 0; margin-top:-20px; position:relative; z-index:10">
        <h2 id="p-name" style="color:var(--cherry); margin:0"></h2>
        <p id="p-price" style="font-weight:900; font-size:22px; margin:10px 0"></p>
        <div class="desc-box">
            <div style="font-weight:800; font-size:11px; color:var(--cherry); margin-bottom:5px">PRODUCT DETAILS</div>
            <div id="p-desc" class="desc-text"></div>
        </div>
    </div>
    <div class="btn-group"><button class="buy-btn" onclick="showPg('checkout-pg')">BUY NOW</button></div>
</div>

<div id="checkout-pg" class="page">
    <div style="padding:20px;font-weight:800;color:var(--cherry);cursor:pointer" onclick="showPg('p-pg')">‚Üê BACK</div>
    <div style="padding:20px"><h2 style="text-align:center; color:var(--cherry);">Checkout</h2><button class="buy-btn">PLACE ORDER</button></div>
</div>

<div class="bottom-nav">
    <div class="nav-btn" onclick="showPg('h-pg')">üè† HOME</div>
</div>

<script>
    const ADMIN_URL="https://script.google.com/macros/s/AKfycbwdDAiEuLykJJPxRK7Gh89yF-Pmyf71RKMGTh83j-SYe4AGKuqMR1zY9UcrKQbnoFU/exec";
    let store={}; 

    async function init(){ try{const r=await fetch(ADMIN_URL); store=await r.json(); renderH();}catch(e){}}

    function renderH(data=store){
        document.getElementById('eid-scroll').innerHTML=(data.Eid||[]).map(p=>renderItem(p)).join('');
    }

    function renderItem(p){
        const pJson = JSON.stringify(p).replace(/'/g, "&apos;");
        return `<div class="scroll-item" onclick='openP(${pJson})'>
            <img src="${p['image 1'] || p.img}">
            <p style="font-size:10px;font-weight:700">‚Çπ${p.price}</p>
        </div>`;
    }

    function openSub(k){
        showPg('s-pg');
        let h = ""; let list = k==='western'?['Dresses','Tops']:['Saree','Suits'];
        list.forEach(n=>{ h+=`<div class="sub-item" onclick="openSubProducts('${n}')"><img src="${n.toLowerCase()}.jpg" onerror="this.src='https://via.placeholder.com/80'"><p>${n}</p></div>`; });
        document.getElementById('s-grid').innerHTML = h;
    }

    function openSubProducts(catName){
        showPg('p-list-pg');
        let products = [];
        Object.keys(store).forEach(sheet => { if(Array.isArray(store[sheet])) { 
            let filtered = store[sheet].filter(p => p.subCat && p.subCat.toLowerCase().trim() === catName.toLowerCase().trim()); 
            products = [...products, ...filtered]; 
        }});
        document.getElementById('p-list-grid').innerHTML = products.map(p => renderItem(p)).join('');
    }

    function openP(p){
        showPg('p-pg');
        document.getElementById('p-name').innerText=p.name;
        document.getElementById('p-price').innerText="‚Çπ"+p.price;
        document.getElementById('p-desc').innerText= p.description || p.Description || "Premium Quality Product.";
        
        // GRID DISPLAY LOGIC
        let mainImg = p['image 1'] || p.img;
        let img2 = p['image 2'] || p.img2;
        let img3 = p['image 3'] || p.img3;

        let galleryHtml = `<img src="${mainImg}">`;
        if((img2 && img2.length > 10) || (img3 && img3.length > 10)){
            galleryHtml += `<div class="sub-imgs">`;
            if(img2) galleryHtml += `<img src="${img2}">`;
            if(img3) galleryHtml += `<img src="${img3}">`;
            galleryHtml += `</div>`;
        }
        document.getElementById('p-grid-gallery').innerHTML = galleryHtml;
    }

    function showPg(id){document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));document.getElementById(id).classList.add('active');window.scrollTo(0,0)}
    window.onload = init;
</script>
</body>
</html>
